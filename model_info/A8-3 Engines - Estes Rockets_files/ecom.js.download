"use strict";(function(){this.ajaxCartSuccess=function(e,t){window.omegaCallBackAddToCart&&"function"==typeof window.omegaCallBackAddToCart&&window.omegaCallBackAddToCart(),window.fetch(this.routes.cart_url+"?section_id=ecom-ajax-cart"+(e&&e.key?"&key="+e.key:""),{method:"GET",headers:{"Content-Type":"text/html"}}).then(e=>e.text()).then(t=>{let o=document.querySelector(".ecom-cart-popup"),n=document.createElement("div");n.classList.add("ecom-cart-popup");const i=(new DOMParser).parseFromString(t,"text/html").querySelector("#shopify-section-ecom-ajax-cart");if(!i)return window.location.href=this.routes.cart_url,!1;if(n.appendChild(i),document.body.appendChild(n),this.handleCartPopup(n),e&&e.key){let t=n.querySelector('.ecom-ajax-cart-line-item[data-key="'+e.key+'"]');if(t){let e=document.querySelector(".ecom-ajax-cart-body");if(e){const o=e.querySelector(".ecom-ajax-cart-line-item");if(o){const n=e.getBoundingClientRect().top-o.getBoundingClientRect().top;(e=t.closest(".ecom-ajax-cart-body")).scrollTop=n}}}}o&&o.remove(),this.onAjaxPopupLoaded()}).catch(e=>{console.log(e),alert(e.message)})},this.onAjaxPopupLoaded=()=>{},this.blinkElement=function(e){e.classList.add("ecom-line-item-blink"),setTimeout(()=>{e&&e.classList.remove("ecom-line-item-blink")},2e3)},this.recentProducts=function(){if(window.location.pathname.indexOf("/products/")>=0){var e=window.location.pathname.split("/products/").pop().split("/")[0];try{var t=JSON.parse(window.localStorage.getItem("ecom-recent-products"));if("object"!=typeof t)throw"Data invalid";if(t.indexOf(e)>=0)return 0;t.reverse(),t.push(e),t.reverse(),window.localStorage.setItem("ecom-recent-products",JSON.stringify(t))}catch(e){window.localStorage.setItem("ecom-recent-products","[]")}}},this.handleCartPopup=function(e){var t=this;function o(e){"minus"===this.name?(this.nextElementSibling.stepDown(),this.nextElementSibling.dispatchEvent(new window.Event("change"))):"plus"===this.name&&(this.previousElementSibling.stepUp(),this.previousElementSibling.dispatchEvent(new window.Event("change")))}function n(){let e=this.value,o=this.dataset.key,n=this.closest(".ecom-ajax-cart-line-item");n&&n.classList.add("ecom-item-loading"),t.cartItemChange(o,parseInt(e)).then(e=>{let i=null;if(e.items&&(i=e.items.find(e=>e.key===o)),i)t.ajaxCartSuccess(i);else{if(e.errors){t.showToast(e.errors,"error");let o=n.closest(".ecom-ajax-cart-body");if(o){const e=o.querySelector(".ecom-ajax-cart-line-item");if(e){const t=o.getBoundingClientRect().top-e.getBoundingClientRect().top;setTimeout((function(){(o=document.querySelector(".ecom-ajax-cart-body")).scrollTo({top:t,behavior:"smooth"})}),450)}}}t.ajaxCartSuccess()}n&&n.classList.remove("ecom-item-loading")}).catch(e=>{console.error(e),t.ajaxCartError(e)})}e.addEventListener("click",(function(t){if(t.target===e)e.remove();else{t.target.closest('[data-ecom-action="close"]')&&e.remove()}})),e.querySelectorAll(".ecom-ajax-cart-line-item-quantity-button").forEach(e=>{e.addEventListener("click",o)}),e.querySelectorAll(".ecom-ajax-cart-line-item-quantity-input").forEach(e=>{e.addEventListener("change",n)}),e.querySelector("#ecom-ajax-cart-note")&&e.querySelector("#ecom-ajax-cart-note").addEventListener("change",(function(){let e=this.value;t.cartUpdate({note:e})})),e.querySelectorAll(".ecom-ajax-cart-line-item-button-remove").forEach(e=>{e.addEventListener("click",(function(e){e.preventDefault(),this.value=0,n.bind(this)(e)}))})},this.ajaxCartError=function(e,t){alert("Error"+e.message)},this.beforeAjaxCartSend=function(e){},this.ajaxCart=function(){var e=e=>{if(e.preventDefault(),!e.target.querySelector('[name="id"]'))return!!window.document.querySelector("#admin-bar-iframe")&&(alert('Please drag Variant picker element to this section to allow the "Add to cart" feature working. This message only show for owner\'s store'),!1);var t=e.target.querySelector(".ecom-product-single__add-to-cart--submit.ecom-clicked");t||(t=e.target.querySelector(".ecom-product-single__add-to-cart--submit")),t&&(t.style.cursor="not-allowed",t.style.pointerEvents="none",t.classList.add("ecom-ajax-loading","ecom-loading")),this.beforeAjaxCartSend(e.target);let o=new FormData(e.target);return o.append("sections","cart-notification-product,cart-notification-button,cart-icon-bubble"),window.fetch(this.routes.cart_add_url,{method:"POST",headers:{Accept:"application/json"},body:o}).then(e=>e.json()).then(o=>{if(o.errors)throw new Error(o.errors);let{action:n,href:i,textAddedCart:a,target:r,messageAddedCart:c}=t.dataset;t&&(t.style.cursor="pointer",t.style.pointerEvents="auto",t.classList.remove("ecom-ajax-loading","ecom-loading"),t.querySelector(".ecom-add-to-cart-text")&&(t.querySelector(".ecom-add-to-cart-text").innerHTML=a)),this.onAjaxCartSuccess&&this.onAjaxCartSuccess(o,e.target);let s=this.routes;switch(n){case"cart":return setTimeout((function(){window.location.href=s.cart_url}),500);case"reload":return setTimeout((function(){return window.location.reload()}),500);case"checkout":return setTimeout((function(){return window.location.href=s.root_url+("/"===s.root_url?"":"/")+"checkout"}),500);case"message":this.showToast(c);break;case"link":i&&setTimeout((function(){return"_blank"===r?window.open(i):window.location.href=i}),500);default:this.ajaxCartSuccess(o,e.target)}}).catch(o=>{t&&(t.style.cursor="pointer",t.style.pointerEvents="auto",t.classList.remove("ecom-ajax-loading","ecom-loading")),this.ajaxCartError(o,e.target)}),!1};const t=document.querySelectorAll(".ecom-product-single__add-to-cart--submit");t.length&&t.forEach((function(e){e.addEventListener("click",(function(){t.forEach((function(e){e.classList.remove("ecom-clicked")})),e.classList.add("ecom-clicked")}))})),document.body.addEventListener("submit",(function(t){if(t.target.classList.contains("ecom-product-form")&&"FORM"===t.target.nodeName)return t.preventDefault(),e.bind(this)(t),!1})),this.handleATCList();let o=document.querySelectorAll(".ecom-ajax-cart-simple[data-id]");var n=this;o.forEach((function(e){e.addEventListener("click",(function(e){n.handleClickEvent(this,e)}))}))},this.handleClickEvent=function(e,t,o=!1){t.preventDefault();const n=e.closest(".ecom-collection__product-form__actions");let i=1,a=null;n&&(a=n.querySelector(".ecom-collection__product-quantity-input")),a&&(i=a.value);const r=e,c=this;r&&(r.style.cursor="pointer",r.style.pointerEvents="auto",r.classList.add("ecom-ajax-loading")),c.beforeAjaxCartSend(t.target),window.fetch(c.routes.cart_add_url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:r.dataset.id,quantity:i})}).then(e=>e.json()).then(e=>{if(e.errors)throw new Error(e.errors);let{action:n,href:i,textAddedCart:a,target:s,messageAddedCart:l}=r.dataset;if(r&&(r.style.cursor="pointer",r.style.pointerEvents="auto",r.classList.remove("ecom-ajax-loading","ecom-loading"),r.querySelector(".ecom-add-to-cart-text").innerHTML=a),c.onAjaxCartSuccess&&c.onAjaxCartSuccess(e,t.target),o&&!c.configs.ajax_cart.enable)return setTimeout((function(){return window.location.href=c.routes.cart_url}),500);switch(n){case"cart":return setTimeout((function(){return window.location.href=c.routes.cart_url}),500);case"reload":return setTimeout((function(){return window.location.reload()}),500);case"checkout":return setTimeout((function(){return window.location.href=c.routes.root_url+"checkout"}),500);case"message":c.showToast(l);break;case"link":if(i)return setTimeout((function(){return"_blank"===s?window.open(i):window.location.href=i}),500);default:c.ajaxCartSuccess(e,t.target)}}).catch(e=>{window.alert(e.message),console.error(e),r&&(r.style.cursor="pointer",r.style.pointerEvents="auto",r.classList.remove("ecom-ajax-loading","ecom-loading")),c.ajaxCartError(e,t.target)})},this.cartItemChange=function(e,t){return window.fetch(this.routes.cart_change_url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:t})}).then(e=>e.json())},this.handleATCList=function(){let e=document.querySelectorAll(".ecom-collection__product-item .ecom-product-form");var t=this;e.forEach((function(e){let o=e.querySelector(".ecom-ajax-cart-submit"),n=e.querySelector('[name="variant_id"]');o&&n&&o.addEventListener("click",(function(e){e.preventDefault(),this.dataset.id=n.value,t.handleClickEvent(this,e,!0)})),e.classList.add("ecom-ajax-cart")}))},this.cartUpdate=function(e,t){return window.fetch(this.routes.cart_update_url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json())},this.showToast=function(e,t){let o=document.querySelector("#ecom-toast-desc"),n=document.querySelector("#ecom-toast"),i=document.querySelector("#ecom-toast-icon");"error"===t?(n.style.cssText="background-color: red;overflow: hidden; z-index: 10000000;",i.style.cssText="background-color: red;"):(n.style.cssText="background-color: #333;overflow: hidden; z-index: 10000000;",i.style.cssText="background-color: #333; border-radius: 2px;"),n&&o&&i&&(o.innerHTML=e,n.classList.add("ecom-toast-show"),n.style.setProperty("--ecom-max-width",o.clientWidth+50+"px"),setTimeout(()=>{n.classList.remove("ecom-toast-show")},5e3))},this.initToastTemplate=function(){let e=document.querySelector("#ecom-template-html");if(e){let t=document.createElement("div");t.innerHTML=e.innerHTML,document.body.appendChild(t)}},this.isAdmin=function(){return document.querySelector("#admin-bar-iframe")||window.Shopify.designMode},this.init=function(){if(this.initToastTemplate(),window.Shopify&&!this.isAdmin()){let n=window.EComposer.PAGE||window.EComposer.TEMPLATE||window.EComposer.SECTION||{};if(n){if(n.type&&(n.layout_type=n.type,delete n.type),n.template_id&&(n.layout_id=n.template_id,delete n.template_id),window.Shopify.analytics)Shopify.analytics.publish("ec_page_viewed",n);else{var e=0;let t=setInterval((function(){window.Shopify.analytics&&(Shopify.analytics.publish("ec_page_viewed",n),clearInterval(t)),++e>200&&clearInterval(t)}),100)}var t=(new Date).getTime(),o=!1;document.addEventListener("click",(function(e){o=!0}),{once:!0}),window.addEventListener("beforeunload",(function(e){if(!o){var i=(new Date).getTime()-t;window.Shopify.analytics&&Shopify.analytics.publish("ec_bounce_rate",{...n,elapsed_time:(i/1e3).toFixed(2)})}}))}}this.configs&&this.configs.ajax_cart&&this.configs.ajax_cart.enable?this.ajaxCart():(this.handleATCList(),document.body.addEventListener("submit",(function(e){e.target.classList.contains("ecom-product-form")&&"FORM"===e.target.nodeName&&window.omegaCallBackAddToCart&&"function"==typeof window.omegaCallBackAddToCart&&window.omegaCallBackAddToCart()})))},this.init()}).bind(window.EComposer||{})(),function(){var e;function t(){document.querySelectorAll(".ecom-sections .ecom-video-background").forEach((function(e){"true"===e.dataset.playPauseInview&&(!function(e){const{top:t,bottom:o}=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;return(t>0||o>0)&&t<n}(e)?e.pause():e.play())}))}function o(){clearTimeout(window.stretchedTimmer),window.stretchedTimmer=setTimeout(()=>{let e=document.querySelectorAll(".ecom-core.ecom-section"),t=document.querySelectorAll(".ecom-swiper-container"),o=document.querySelectorAll(".ecom-sections"),n=window.innerWidth;if(e.length>0){o.forEach(e=>{e.style.width=""});let t=(n-o[0].offsetWidth)/2;e.forEach(e=>{e.classList.contains("ecom-section__stretched")?(e.style.width=n+"px",e.style.marginLeft=-t+"px"):(e.style.width="",e.style.marginLeft="")})}t.length>0&&t.forEach(e=>{e.EComSwiper&&e.EComSwiper.update()})},50)}window.addEventListener("scroll",(function(){clearTimeout(e),e=setTimeout(t,500)})),o(),window.addEventListener("resize",o),window.addEventListener("load",o),document.addEventListener("DOMContentLoaded",(function(){"function"==typeof window.EComposer.initQuickview&&window.EComposer.initQuickview()})),function(e,t={}){let o=document.querySelectorAll(e);(o=Array.from(o)).forEach(e=>{!function(e,t){new IntersectionObserver((o,n)=>{o.forEach(o=>{o.isIntersecting&&(t.cb?t.cb(e):(o.target.classList.add("ecom-animated"),o.target.classList.add("animated")),n.unobserve(o.target))})},t).observe(e)}(e,t)})}(".ecom-animation");(function(){const e=this;this.defaultValue=[],this.init=function(){const t=document.querySelectorAll("[ecom-scrolling-animation]");t.length&&window.addEventListener("scroll",()=>{e.handleScrollAnimation(t)})},this.handleScrollAnimation=function(t){t.forEach((function(t,o){e.animation(t,o)}))},this.animation=function(e,t){const o=e.getAttribute("ecom-scrolling-animation")?JSON.parse(e.getAttribute("ecom-scrolling-animation")):null;if(!o)return;const n=this.getViewPercentage(e);if(n>0&&n<100){const c=this.getOptions(o,n,e,t);var i="",a="",r="";if(Object.keys(c).forEach((function(e){["translateX","translateY"].includes(e)?(i+=`${e}(${c[e]})`,delete c[e]):["blur"].includes(e)?(r+=`${e}(${c[e]})`,delete c[e]):["rotate"].includes(e)&&(a=`${e}(${c[e]})`,delete c[e])})),Object.keys(c).length&&Object.assign(e.style,c),i&&(e.style.transform=i),r&&(e.style.filter=r),a){const t=e.querySelector(":first-child");t&&(t.style.transform=a)}}},this.getStyleValue=function(e,t){if(!t)return"";const o=new RegExp(`${e}\\(([\\d\\-.a-z]+)\\)`);return t.match(o)[1]||""},this.getOptions=function(t,o,n,i){var a={};return t.forEach((function(t){const r=t.value;if(!r)return;const c=0<o&&o<100;var s;if(e.defaultValue[i]){if(void 0===e.defaultValue[i][t.css]){let o=n.style[t.css];["translateX","translateY"].includes(t.css)&&(o=e.getStyleValue(t.css,n.style.transform)||0),["blur"].includes(t.css)&&(o=e.getStyleValue(t.css,n.style.filter)||0),e.defaultValue[i][t.css]=o}}else e.defaultValue[i]={},e.defaultValue[i][t.css]=n.style[t.css];if(c)if(r.trigger_start||r.trigger_end){let t=r.trigger_start?r.trigger_start:0,n=r.trigger_end?r.trigger_end:100;if(t>n){let e=t;t=n,n=e}if(t<=o&&n>=o){var l=(o-t)/(n-t)*100;s=e.caculateCss(l,r)}}else s=e.caculateCss(o,r);else s=e.defaultValue[i][t.css];a[t.css]=s})),a},this.caculateCss=function(e,t){let o="";if(t.hasOwnProperty("start")&&t.hasOwnProperty("end")){if(t.hasOwnProperty("middle")){var n=this.toInt(t.start),i=this.toInt(t.middle),a=this.toInt(t.end);o=e<=50?n-(o=(n-i)*(e/100/.5)):i+(o=(i-a)*(1-e/100/.5))}else{o=(this.toInt(t.start)-this.toInt(t.end))*(e/100),o=this.toInt(t.start)-o}return o+this.getUnit(t.start)}if(t.middle&&50===e)return this.toInt(t.middle)+this.getUnit(t.middle)},this.toInt=function(e){return"number"==typeof e?e:parseInt(e.replace("px",""))},this.getUnit=function(e){return"number"==typeof e?"":e.replace(/-?([\d]+)/,"")},this.getViewPercentage=function(e){const t=e.getBoundingClientRect(),o=window.innerHeight;return(window.scrollY+o-(t.y+window.pageYOffset))/((o+t.height)/100)},this.init()}).bind({}).call()}();